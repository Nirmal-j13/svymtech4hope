<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard | Course Management</title>
  <script src="./Javascripts/nav.js" defer></script>
  <script src="./Javascripts/auth.js" defer></script>
  <script src="./Javascripts/modal.js" defer></script>
  <script src="./Javascripts/admin_courses.js" defer></script>
  <link rel="stylesheet" href="css/nav.css" />
  <link rel="stylesheet" href="css/modal.css" />
  <link rel="stylesheet" href="css/admin_courses.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <style>
    :root { --primary-color: #007bff; --primary-hover: #0056b3; --secondary-color: #6c757d; --success-color: #28a745; --success-hover: #218838; --danger-color: #dc3545; --danger-hover: #c82333; --warning-color: #ffc107; --warning-hover: #e0a800; --white-bg: #ffffff; --text-color: #333333; --subtle-text: #666666; --border-color: #e9ecef; --box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05); }
    .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.4); justify-content: center; align-items: center; padding: 20px; }
    .modal.show { display: flex; }
    .modal-content { background-color: white; margin: auto; padding: 30px; border-radius: 12px; width: 100%; max-width: 900px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3); position: relative; animation-name: animatetop; animation-duration: 0.4s; }
    .close-btn { color: #aaa; position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; transition: color 0.2s; }
    .close-btn:hover { color: var(--text-color); }
    @keyframes animatetop { from { top: -300px; opacity: 0; } to { top: 0; opacity: 1; } }
    .form-row { display: flex; gap: 20px; margin-bottom: 15px; }
    .form-group { flex: 1; display: flex; flex-direction: column; }
    .form-group input, .form-group select, .form-group textarea { padding: 6px 10px; font-size: 14px; margin-top: 4px; border: 1px solid var(--border-color); border-radius: 4px; }
    .icon-btn { width: 30px; height: 30px; border: none; background: var(--primary-color); color: white; font-size: 16px; cursor: pointer; border-radius: 4px; margin-left: 5px; }
    .icon-btn:hover { background: var(--primary-hover); }
    .save-btn, .cancel-btn, .add-button { padding: 8px 16px; margin-top: 10px; cursor: pointer; border-radius: 4px; border: none; color: white; }
    .removeBtn { background: #dc3545; }
    .save-btn { background: var(--primary-color); } .save-btn:hover { background: var(--primary-hover); }
    .cancel-btn { background: #6c757d; margin-left: 10px; } .cancel-btn:hover { background: #5a6268; }
    table.module-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    table.module-table th, table.module-table td { border: 1px solid var(--border-color); padding: 8px; text-align: left; }
    table.module-table th { background: var(--white-bg); }
  </style>
</head>
<body>
  <div class="hamburger" id="hamburger"><i class="fas fa-bars"></i></div>
  <div class="overlay" id="overlay"></div>
  <aside class="side-menu" id="sideMenu"></aside>

  <main class="main-content">
    <div class="header-row">
      <h1><i class="fas fa-book"></i> Course Management</h1>
      <input type="text" class="search-input" id="courseSearch" placeholder="Search courses..." />
      <button id="openAddCourseModal" class="add-course-btn">+ Add Course</button>
    </div>

    <div id="coursesContainer" class="courses-container"></div>
  </main>

  <!-- Add Course Modal -->
  <div id="addCourseModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" id="closeModal">&times;</span>
      <h3 class="welcome-message"><i class="fas fa-plus"></i> Add Training Module</h3>

      <div class="form-card">
        <form id="courseForm">
          <!-- Course Details -->
          <div class="form-row">
            <div class="form-group">
              <label for="trainingName">Course Name:</label>
              <input type="text" id="trainingName" required />
            </div>
            <div class="form-group">
              <label for="price">Price (â‚¹):</label>
              <input type="number" id="price" min="0" required />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="startDate">Start Date:</label>
              <input type="date" id="startDate" required />
            </div>
            <div class="form-group">
              <label for="endDate">End Date:</label>
              <input type="date" id="endDate" required />
            </div>
            <div class="form-group">
              <label for="duration">Duration (months):</label>
              <input type="text" id="duration" readonly />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Modules:</label>
              <div id="modulesWrapper"></div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="location">Location:</label>
              <select id="location" required></select>
            </div>
            <div class="form-group">
              <label for="description">Description:</label>
              <textarea id="description" rows="4" placeholder="Enter course description..." required></textarea>
            </div>
          </div>

          <!-- Trainer Fields -->
          <h4>Trainer Details</h4>
          <div class="form-row">
            <div class="form-group">
              <label for="trainerSelect">Select Trainer:</label>
              <select id="trainerSelect" required>
                <option value="">Loading...</option>
              </select>
            </div>
          </div>

          <div id="newTrainerFields" style="display:none;">
            <div class="form-row">
              <div class="form-group">
                <label for="trainerName">Name:</label>
                <input type="text" id="formTrainerName" />
              </div>
              <div class="form-group">
                <label for="trainerExpertise">Expertise:</label>
                <input type="text" id="formTrainerExpertise" />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="trainerMobile">Phone:</label>
                <input type="text" id="formTrainerMobile" />
              </div>
              <div class="form-group">
                <label for="trainerEmail">Email:</label>
                <input type="text" id="formTrainerEmail" />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="trainerSecurityQuestion">Security Question:</label>
                <input type="text" id="formTrainerSecurityQuestion" />
              </div>
              <div class="form-group">
                <label for="trainerSecurityAnswer">Security Answer:</label>
                <input type="text" id="formTrainerSecurityAnswer" />
              </div>
            </div>
          </div>

          <button type="submit" class="save-btn">Save Course</button>
          <button type="button" class="cancel-btn" id="cancelModal">Cancel</button>
          <div class="error" id="errorMsg" style="color:red;margin-top:10px;"></div>
        </form>
      </div>
    </div>
  </div>

  <script src="Javascripts/add_course.js" defer></script>
</body>
</html>

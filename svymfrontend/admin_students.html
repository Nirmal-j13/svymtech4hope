<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SVYM Tech4Hope - Admin Students Management</title>

    <!-- CSS Files -->
    <link rel="stylesheet" href="css/nav.css">
    <link rel="stylesheet" href="css/modal.css">
    <link rel="stylesheet" href="css/admin_dashboard.css">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* ===================== Combined Styles ===================== */
        :root {
            --primary-color: #007bff;
            --primary-hover: #0056b3;
            --secondary-color: #6c757d;
            --success-color: #28a745;
            --success-hover: #218838;
            --danger-color: #dc3545;
            --danger-hover: #c82333;
            --warning-color: #ffc107;
            --warning-hover: #e0a800;
            --white-bg: #ffffff;
            --text-color: #333333;
            --subtle-text: #666666;
            --border-color: #e9ecef;
            --box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: aliceblue;
            margin: 0;
            padding: 0;
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .data-list-container {
            width: 100%;
            max-width: 1200px;
            height: 100vh;
            max-height: 100vh;
            background-color: var(--white-bg);
            border-radius: 12px;
            box-shadow: var(--box-shadow);
            padding: 30px;
        }

        .header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          background-color: #f8faff;
          margin-bottom: 20px;
        }

        .header h1 {
          font-size: 1.8rem;
          color: #004080;
          display: flex;
          align-items: center;
          gap: 10px;
          margin: 0;
        }

        .search-box {
          display: flex;
          align-items: center;
          background-color: #fff;
          border: 1px solid #ccc;
          border-radius: 8px;
          overflow: hidden;
        }

        .search-box input {
          padding: 8px 10px;
          font-size: 1rem;
          border: none;
          outline: none;
          width: 180px;
        }

        .search-btn {
          background-color: var(--secondary-color);
          color: white;
          border: none;
          padding: 8px 10px;
          cursor: pointer;
        }

        .search-btn:hover {
          background-color: #0056b3;
        }

        /* Notification badge for requests */
        .badge {
            display: inline-block;
            background-color: var(--danger-color);
            color: white;
            font-size: 0.8rem;
            font-weight: 700;
            padding: 4px 8px;
            border-radius: 50%;
            margin-left: 5px;
        }

        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .button-group button {
            padding: 10px 16px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s ease;
        }

        .add-button { background-color: var(--primary-color); color: white; width: auto;}
        .add-button:hover { background-color: var(--primary-hover); }

        .view-button { background-color: var(--secondary-color); color: white; position: relative; width: auto;}
        .view-button:hover { background-color: var(--subtle-text); }

        /* Approve Button */
.approve-btn {
    background-color: var(--success-color);
    color: var(--white-bg);
    border: 1px solid var(--success-color);
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 14px;
    cursor: pointer;
    transition: background-color 0.3s, border-color 0.3s;
}

.approve-btn:hover {
    background-color: var(--success-hover);
    border-color: var(--success-hover);
}

/* Reject Button */
.reject-btn {
    background-color: var(--danger-color);
    color: var(--white-bg);
    border: 1px solid var(--danger-color);
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 14px;
    cursor: pointer;
    transition: background-color 0.3s, border-color 0.3s;
}

.reject-btn:hover {
    background-color: var(--danger-hover);
    border-color: var(--danger-hover);
}


        .table-responsive { width: 100%; overflow-x: auto; margin-top: 20px; }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 700px;
        }

        .data-table th, .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .data-table thead { background-color: #e9f5ff; }

        .data-table tbody tr:nth-child(odd) { background-color: #fafafa; }
        .data-table tbody tr:nth-child(even) { background-color: #f8f9fa; }
        .data-table tbody tr:hover { background-color: #e9ecef; transition: 0.2s; }

        .status {
            padding: 5px 10px;
            border-radius: 20px;
            font-weight: 500;
            font-size: 0.9em;
            display: inline-block;
            white-space: nowrap;
        }
        .status.approved { background-color: var(--success-color); color: white; }
        .status.pending { background-color: var(--warning-color); color: var(--text-color); }
        .status.rejected { background-color: var(--danger-color); color: white; }
        .status.inactive { background-color: #6b7280; color: white; }

        .actions { display: flex; gap: 8px; flex-wrap: wrap; }
        .action-btn { padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 0.9rem; display: inline-flex; align-items: center; gap: 5px; border: 1px solid transparent; transition: all 0.3s ease; font-weight: 500; background-color: transparent; }
        .view-btn { border-color: var(--primary-color); color: var(--primary-color); }
        .view-btn:hover { background-color: var(--primary-color); color: white; }
        .edit-btn { border-color: var(--warning-color); color: var(--warning-color); }
        .edit-btn:hover { background-color: var(--warning-color); color: var(--text-color); }
        .delete-btn { border-color: var(--danger-color); color: var(--danger-color); }
        .delete-btn:hover { background-color: var(--danger-color); color: white; }

        /* Pagination */
        .pagination-controls { display: flex; justify-content: center; align-items: center; margin-top: 1.5rem; gap: 1rem; }
        .page-button { padding: 0.5rem 1rem; border-radius: 0.5rem; border: none; background-color: var(--primary-color); color: white; font-weight: 700; cursor: pointer; }
        .page-button:hover:not(:disabled) { background-color: rgb(0, 115, 156); }
        .page-button:disabled { background-color: #9ca3af; cursor: not-allowed; }
        .page-info { font-weight: 500; font-size: 1.125rem; color: #374151; }

        #studentDetailsTable {
  width: 100%;
  border-collapse: collapse;
}

#studentDetailsTable td {
  padding: 8px 12px;
  border: 1px solid #ddd;
  vertical-align: top;
}

#studentDetailsTable .group-title {
  background-color: #f0f4ff;
  font-weight: bold;
  text-align: left;
  font-size: 1.05em;
  padding: 10px;
  border: none;
}


        @media (max-width: 768px) {
            .data-list-container { padding: 20px; }
            .header { flex-direction: column; align-items: flex-start; }
        }

        /* Error message styling */
        .error-message { color: red; font-size: 0.875rem; }
        .message { padding: 10px; margin-top: 10px; border-radius: 6px; background-color: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>

    <div class="hamburger" id="hamburger"><i class="fas fa-bars"></i></div>
    <div class="overlay" id="overlay"></div>
    <aside class="side-menu" id="sideMenu"></aside>

    <!-- =================== Students Table =================== -->
    <div class="data-list-container">
        <div class="header">
          <h1><i class="fas fa-user-graduate"></i>Student Management</h1>
            <!-- Search Input -->
            <div class="search-box">
              <input
                type="text"
                id="searchInput"
                placeholder="Search by student name..."
              />
              <button id="searchBtn" class="search-btn">
                <i class="fas fa-search"></i>
              </button>
            </div>
            <div class="button-group">
            <!-- View Requests Button -->
            <button class="view-button" id="viewRequestsBtn">
              <i class="fas fa-bell"></i> View Requests
              <span class="badge" id="requestsCount">0</span>
            </button>

            <!-- Add Student Button -->
            <button class="add-button" id="addStudentsBtn">
              <i class="fas fa-plus"></i> Add Student
            </button>
          </div>
        </div>


        <div class="table-responsive">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>UserID</th>
                        <th>Name</th>
                        <th>Email Id</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="studentTableBody">
                    <!-- JS will populate rows -->
                </tbody>
            </table>
        </div>

        <div id="pagination-controls" class="pagination-controls">
            <button id="prevPage" class="page-button">Previous</button>
            <span id="paginationInfo" class="page-info">Page 1 of 1</span>
            <button id="nextPage" class="page-button">Next</button>
        </div>
    </div>

    <!-- =================== Add/Edit Student Modal =================== -->
    <div class="modal hide" id="studentFormModal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <div class="modal-header"><h2 class="form-subheading-main" style="text-align: center">Add Student Data</h2></div>
            <div class="modal-body">
                <form id="studentForm" novalidate>
                  <!-- Full form fields from your last message -->
                  <div class="form-group">
                    <label for="candidateName">Candidate Name:</label>
                    <input type="text" id="candidateName" name="candidateName" required />
                    <span id="candidateNameError" class="error-message"></span>
                  </div>
                  <div class="form-group">
                    <label for="fatherHusbandName">Father's / Husband's Name:</label>
                    <input type="text" id="fatherHusbandName" name="fatherHusbandName" required />
                    <span id="fatherHusbandNameError" class="error-message"></span>
                  </div>
                  <div class="form-group">
                    <label for="email">Email ID:</label>
                    <input type="email" id="email" name="email" required />
                    <span id="emailError" class="error-message"></span>
                  </div>
                  <div class="form-group">
                    <label for="dob">Date of Birth:</label>
                    <input type="date" id="dob" name="dob" required />
                    <span id="dobError" class="error-message"></span>
                  </div>
                  <div class="form-group">
                    <label for="age">Age:</label>
                    <input type="number" id="age" name="age" readonly required />
                    <span id="ageError" class="error-message"></span>
                  </div>
                  <div class="form-group">
                    <label for="districtName">District Name:</label>
                    <select id="districtName" name="districtName" required>
                      <option value="">Select District</option>
                    </select>
                    <span id="districtNameError" class="error-message"></span>
                  </div>
                  <div class="form-group">
                    <label for="talukName">Taluk Name:</label>
                    <select id="talukName" name="talukName" required disabled>
                      <option value="">Select Taluk</option>
                    </select>
                    <span id="talukNameError" class="error-message"></span>
                  </div>
                  <div class="form-group">
                    <label for="villageName">Village Name:</label>
                    <input type="text" id="villageName" name="villageName" required />
                    <span id="villageNameError" class="error-message"></span>
                  </div>
                  
                  <div class="form-group">
                    <label for="familyMembers">Number of Family Members:</label>
                    <input type="number" id="familyMembers" name="familyMembers" min="1" required />
                    <span id="familyMembersError" class="error-message"></span>
                  </div>
                  <div class="form-group">
                    <label for="qualification">Qualification:</label>
                    <input type="text" id="qualification" name="qualification" required />
                    <span id="qualificationError" class="error-message"></span>
                  </div>
                  <div class="form-group">
                    <label for="aadharNumber">Aadhar Number:</label>
                    <input type="text" id="aadharNumber" name="aadharNumber" required pattern="\d{12}" maxlength="12" title="Aadhar number must be 12 digits"/>
                    <span id="aadharNumberError" class="error-message"></span>
                  </div>
                  <div class="form-group">
                    <label for="candidatePhone">Candidate Phone Number:</label>
                    <input type="tel" id="candidatePhone" name="candidatePhone" required pattern="\d{10}" maxlength="10" title="Phone number must be 10 digits"/>
                    <span class="error-message" id="candidatePhoneError"></span>
                  </div>
                  <div class="form-group">
                    <label for="parentPhone">Parent/Guardian Phone Number:</label>
                    <input type="tel" id="parentPhone" name="parentPhone" required pattern="\d{10}" maxlength="10" title="Phone number must be 10 digits"/>
                    <span class="error-message" id="parentPhoneError"></span>
                  </div>
                  <div class="form-group">
                    <label for="gender">Gender:</label>
                    <select id="gender" name="gender" required>
                      <option value="">Select Gender</option>
                      <option value="Male">Male</option>
                      <option value="Female">Female</option>
                      <option value="Other">Other</option>
                    </select>
                    <span id="genderError" class="error-message"></span>
                  </div>
                  <div class="form-group">
                    <label for="caste">Caste:</label>
                    <select id="caste" name="caste" required>
                      <option value="">Select Caste</option>
                      <option value="OBC">OBC</option>
                      <option value="SC">SC</option>
                      <option value="ST">ST</option>
                      <option value="Minority">Minority</option>
                      <option value="Others">Others</option>
                    </select>
                    <span id="casteError" class="error-message"></span>
                  </div>
                  <div class="form-group">
                    <label for="tribal">Tribal Status:</label>
                    <select id="tribal" name="tribal" required>
                      <option value="">Select Option</option>
                      <option value="Jenu Kuruba">Jenu Kuruba</option>
                      <option value="Betta Kuruba">Betta Kuruba</option>
                      <option value="Yerava">Yerava</option>
                      <option value="Soliga">Soliga</option>
                      <option value="Paniya">Paniya</option>
                      <option value="Others">Others</option>
                      <option value="None">None</option>
                    </select>
                    <span id="tribalError" class="error-message"></span>
                  </div>
                  <div class="form-group">
                    <label for="pwd">Person with Disability (PWD):</label>
                    <select id="pwd" name="pwd" required>
                      <option value="">Select Option</option>
                      <option value="Locomotor Diability">Locomotor Diability</option>
                      <option value="Leprosy Cured Person">Leprosy Cured Person</option>
                      <option value="Cerebral Palsy">Cerebral Palsy</option>
                      <option value="Dwarfism">Dwarfism</option>
                      <option value="Muscular Dystrophy">Muscular Dystrophy</option>
                      <option value="Acid Attack Victim">Acid Attack Victim</option>
                      <option value="Blindness">Blindness</option>
                      <option value="Low Vision">Low Vision</option>
                      <option value="Deaf">Deaf</option>
                      <option value="Hard of Hearing">Hard of Hearing</option>
                      <option value="Speech and Language Disability">Speech and Language Disability</option>
                      <option value="Intellectual Disability">Intellectual Disability</option>
                      <option value="Specific Learning Disability">Specific Learning Disability</option>
                      <option value="Mental Illness">Mental Illness</option>
                      <option value="Multiple Disabilities (Including Deaf-blindness)">Multiple Disabilities</option>
                      <option value="Autism Spectrum Disorder">Autism Spectrum Disorder</option>
                      <option value="Multiple Scteterosis">Multiple Sclerosis</option>
                      <option value="Parkinson's Disease">Parkinson's Disease</option>
                      <option value="Thalassemia">Thalassemia</option>
                      <option value="Hemophilia">Hemophilia</option>
                      <option value="Sickle Cell Disease">Sickle Cell Disease</option>
                      <option value="Speech and Lanhuage Disability">Speech and Language Disability</option>
                      <option value="Others">Others</option>
                      <option value="None">None</option>
                    </select>
                    <span id="pwdError" class="error-message"></span>
                  </div>
                  <div class="form-group">
                    <label for="mobiliserName">Field Mobiliser:</label>
                    <select id="mobiliserName" name="mobiliserName" required>
                        <option value="">Select Mobiliser</option>
                        <!-- Options populated dynamically via JS -->
                    </select>
                    <span class="error-message" id="mobiliserNameError"></span>
                  </div>
                  <input type="hidden" name="mobiliserNameText" id="mobiliserNameText">
                  <div class="form-group">
                    <label for="supportedProject">Supported Project (Optional):</label>
                    <input type="text" id="supportedProject" name="supportedProject"/>
                    <span id="supportedProjectError" class="error-message"></span>
                  </div>
                  <div class="form-group">
                <label for="referralSource">How do you know about this training program?</label>
                <select id="referralSource" name="referralSource" class="form-control" required>
                    <option value="">-- Select an option --</option>
                    <option value="whatsapp">WhatsApp</option>
                    <option value="instagram">Instagram</option>
                    <option value="facebook">Facebook</option>
                    <option value="linkedin">LinkedIn</option>
                    <option value="youtube">YouTube</option>
                    <option value="svym_website">SVYM Website</option>
                    <option value="brochure">Brochure</option>
                    <option value="newspaper">Newspaper</option>
                    <option value="mobilization_camp">Mobilization Camp</option>
                    <option value="friends">Friends</option>
                    <option value="relatives">Relatives</option>
                    <option value="alumni">Alumni</option>
                    <option value="SVYM Staff">SVYM Staff</option>
                </select>
                <span id="referralSourceError" class="error-message"></span>
            </div>

            <div class="form-group" id="staffNameDiv" style="display: none;">
                <label for="staffName">Staff Name </label>
                <input type="text" id="staffName" name="staffName" placeholder="Enter staff name">
                <span id="staffNameError" class="error-message"></span>
            </div>
                  
                  <button type="submit" class="add-button">Add Student Data</button>
                </form>
                <div id="message" class="message" style="display: none"></div>
                <div id="generatedUserId" style="display: none"></div>
                <div id="adminapprovalMessage" class="message" style="display: none"></div>
            </div>
        </div>
    </div>

    <!-- =================== View Requests Modal =================== -->
    <div class="modal hide" id="requestsModal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <div class="modal-header"><h2>Student Requests</h2></div>
            <div class="modal-body table-responsive">
                <table class="data-table" id="requestsTable">
                    <thead>
                        <tr>
                            <th>Student ID</th>
                            <th>Student Name</th>
                            <th>Email</th>
                            <th>Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="requestsTableBody">
                        <!-- JS will populate request rows -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- =================== View/Edit Student Modal =================== -->
    <div id="viewModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <div class="modal-header"><h2 id="modalStudentName"></h2></div>
            <div class="modal-body">
                <table class="student-details-table" id="studentDetailsTable"></table>
            </div>
        </div>
    </div>

    <script src="Javascripts/nav.js"></script>
    <script src="Javascripts/auth.js"></script>
    <script src="Javascripts/modal.js"></script>
    <script src="Javascripts/admin_student.js"></script>
</body>
</html>
